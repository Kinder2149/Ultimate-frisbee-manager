<div class="mobile-image-viewer">
  <div class="viewer-header">
    <button 
      mat-icon-button 
      class="close-button"
      (click)="onClose()"
      aria-label="Fermer"
    >
      <mat-icon>close</mat-icon>
    </button>
    <div class="image-counter">
      {{ currentIndex + 1 }} / {{ images.length }}
    </div>
  </div>

  <div 
    class="image-container"
    #imageContainer
    (touchstart)="onTouchStart($event)"
    (touchmove)="onTouchMove($event)"
    (touchend)="onTouchEnd($event)"
    (dblclick)="onDoubleTap($event)"
  >
    <img 
      *ngIf="images.length > 0"
      [src]="images[currentIndex]"
      [alt]="'Image ' + (currentIndex + 1)"
      [style.transform]="transformStyle"
      class="viewer-image"
    />
  </div>

  <div class="viewer-controls">
    <button 
      mat-icon-button 
      [disabled]="!canGoPrevious"
      (click)="previous()"
      aria-label="Image précédente"
    >
      <mat-icon>chevron_left</mat-icon>
    </button>

    <div class="dots-indicator">
      <span 
        *ngFor="let img of images; let i = index"
        class="dot"
        [class.active]="i === currentIndex"
      ></span>
    </div>

    <button 
      mat-icon-button 
      [disabled]="!canGoNext"
      (click)="next()"
      aria-label="Image suivante"
    >
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
</div>
