<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1>
        <mat-icon>dashboard</mat-icon>
        Tableau de bord
      </h1>
      <p class="subtitle">Vue d'ensemble de votre plateforme</p>
    </div>
    <div class="header-actions">
      <button mat-raised-button color="accent" (click)="exportData()">
        <mat-icon>download</mat-icon>
        Exporter les données
      </button>
      <button mat-icon-button (click)="refresh()" [disabled]="loading">
        <mat-icon [class.spinning]="loading">refresh</mat-icon>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading && !data" class="loading-container">
    <mat-spinner diameter="60"></mat-spinner>
    <p>Chargement des données...</p>
  </div>

  <!-- Content -->
  <div *ngIf="data" class="dashboard-content">
    <!-- Statistics Cards -->
    <section class="stats-section">
      <h2>Statistiques globales</h2>
      <div class="stats-grid">
        <mat-card *ngFor="let card of statsCards" 
                  class="stat-card" 
                  [style.--card-color]="card.color"
                  (click)="navigateTo(card.route)">
          <mat-card-content>
            <div class="stat-icon">
              <mat-icon>{{ card.icon }}</mat-icon>
            </div>
            <div class="stat-info">
              <div class="stat-value">{{ data.counts[card.key] }}</div>
              <div class="stat-label">{{ card.label }}</div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </section>

    <!-- Recent Activity -->
    <section class="activity-section">
      <h2>Activité récente</h2>
      <mat-card class="activity-card">
        <mat-card-content>
          <div *ngIf="recentActivity.length === 0" class="empty-state">
            <mat-icon>inbox</mat-icon>
            <p>Aucune activité récente</p>
          </div>

          <div *ngIf="recentActivity.length > 0" class="activity-list">
            <div *ngFor="let item of recentActivity" 
                 class="activity-item"
                 (click)="navigateTo(getActivityRoute(item))">
              <div class="activity-icon" [style.background-color]="item.color">
                <mat-icon>{{ item.icon }}</mat-icon>
              </div>
              <div class="activity-details">
                <div class="activity-title">{{ item.title }}</div>
                <div class="activity-subtitle" *ngIf="item.subtitle">{{ item.subtitle }}</div>
              </div>
              <div class="activity-meta">
                <mat-chip class="type-chip">{{ item.type }}</mat-chip>
                <span class="activity-time">{{ getRelativeTime(item.createdAt) }}</span>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </section>
  </div>
</div>
