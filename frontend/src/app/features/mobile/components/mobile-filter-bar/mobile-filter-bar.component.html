<div class="mobile-filter-bar">
  <div class="mobile-filter-bar__categories">
    <button
      *ngFor="let category of categories"
      class="category-bubble"
      [class.category-bubble--active]="activeCategory === category.type"
      [style.--category-color]="category.color"
      (click)="onCategoryClick(category.type)">
      <mat-icon class="category-bubble__icon">{{ category.icon }}</mat-icon>
      <span class="category-bubble__label">{{ category.label }}</span>
      <span class="category-bubble__count">{{ getCategoryCount(category.type) }}</span>
    </button>
  </div>

  <button 
    class="mobile-filter-bar__sort"
    mat-icon-button
    (click)="onSortClick()"
    [attr.aria-label]="'Trier par ' + sortLabel">
    <mat-icon>{{ sortIcon }}</mat-icon>
    <span class="sort-label">{{ sortLabel }}</span>
  </button>
</div>

<div class="mobile-filter-bar__tags" *ngIf="selectedTags.length > 0 || availableTags.length > 0">
  <div class="tags-scroll">
    <div class="tag-chip tag-chip--selected" *ngFor="let tag of selectedTags">
      <span class="tag-chip__label">{{ tag.label }}</span>
      <button 
        class="tag-chip__remove"
        (click)="onTagRemove(tag.id!)"
        aria-label="Retirer le tag">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <div 
      class="tag-chip"
      *ngFor="let tag of availableTags"
      [class.tag-chip--selected]="isTagSelected(tag)"
      (click)="onTagClick(tag)">
      <span class="tag-chip__label">{{ tag.label }}</span>
    </div>
  </div>
</div>
