*** Begin Patch
*** Update File: backend/config/index.js
@@
 if (result.error) {
   // En production, les variables sont généralement définies directement sur le serveur
   if (process.env.NODE_ENV !== 'production') {
     console.warn(`[Config] Avertissement: Le fichier .env n'a pas été trouvé à ${envPath}. Assurez-vous que les variables d'environnement sont définies.`);
   }
 }
 
+// Validation préalable des secrets JWT
+const isProd = process.env.NODE_ENV === 'production';
+if (!process.env.JWT_SECRET || !process.env.JWT_REFRESH_SECRET) {
+  if (isProd) {
+    console.error('[Config] FATAL: JWT secrets are missing in production (JWT_SECRET/JWT_REFRESH_SECRET).');
+    process.exit(1);
+  } else {
+    console.warn('[Config] Warning: JWT secrets missing; provide them via backend/.env (not tracked).');
+  }
+}
+
 // Valider et exporter la configuration
 const config = {
   port: process.env.PORT || 3002,
   databaseUrl: process.env.DATABASE_URL,
   corsOrigins: process.env.CORS_ORIGINS || 'http://localhost:4200',
   cloudinary: {
     url: process.env.CLOUDINARY_URL,
     cloudName: process.env.CLOUDINARY_CLOUD_NAME,
     apiKey: process.env.CLOUDINARY_API_KEY,
     apiSecret: process.env.CLOUDINARY_API_SECRET,
   },
   jwt: {
-    secret: process.env.JWT_SECRET || 'votre-secret-jwt-par-defaut',
+    secret: process.env.JWT_SECRET,
     expiresIn: process.env.JWT_EXPIRES_IN || '7d',
-    refreshSecret: process.env.JWT_REFRESH_SECRET || 'votre-secret-refresh-par-defaut',
+    refreshSecret: process.env.JWT_REFRESH_SECRET,
     refreshExpiresIn: process.env.JWT_REFRESH_EXPIRES_IN || '30d',
   }
 };
*** End Patch

=== Test commands ===
# Production: doit quitter si secrets manquants
$env:NODE_ENV='production'; node backend/server.js; echo $LASTEXITCODE; $env:NODE_ENV=''

# Développement: avertissement si secrets manquants
$env:NODE_ENV='development'; node backend/server.js
