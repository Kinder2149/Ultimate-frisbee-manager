{
  "phase": "pkg-workspaces",
  "branch": "chore/workspaces/shared",
  "mode": "modification",
  "timestamp": "2025-11-05T17:20:00Z",
  "summary": "Activation npm workspaces (root) et création du package @ufm/shared. Remplacement de la dépendance locale file:.. par workspace:* et migration des imports @shared -> @ufm/shared.",
  "inputs": {
    "root_package_json": "package.json",
    "backend_package_json": "backend/package.json",
    "frontend_package_json": "frontend/package.json",
    "shared_tsconfig": "shared/tsconfig.json",
    "usages_query": "@shared constants consumers"
  },
  "detected_usages": [
    "frontend/src/app/features/settings/components/tag-list/tag-list.component.ts",
    "frontend/src/app/features/tags/pages/tags-manager.component.ts",
    "frontend/src/app/features/tags/components/tag-form/tag-form.component.ts",
    "frontend/src/app/features/tags-advanced/components/tag-mapping/tag-mapping.component.ts"
  ],
  "changes": [
    {
      "file": "package.json",
      "delta": {"workspaces": ["frontend","backend","shared"]}
    },
    {
      "file": "backend/package.json",
      "delta": {"dependencies": {"@ufm/shared": "workspace:*"}, "removed": ["ultimate-frisbee-manager:file.."]}
    },
    {
      "file": "frontend/package.json",
      "delta": {"dependencies": {"@ufm/shared": "workspace:*"}}
    },
    {
      "file": "shared/package.json",
      "created": true,
      "content_summary": {"name": "@ufm/shared", "main": "constants/tag-categories.js", "types": "constants/tag-categories.d.ts", "scripts": {"build": "tsc -p tsconfig.json"}}
    },
    {
      "file": "frontend/* imports",
      "delta": {"@shared/constants/tag-categories": "@ufm/shared/constants/tag-categories"}
    }
  ],
  "build_and_migration": {
    "commands": [
      "npm i",
      "npm run -w shared build",
      "npm --prefix frontend run build"
    ],
    "notes": [
      "TypeScript peut avoir besoin de la sortie dts/js du package shared. Le script build les génère (declaration: true).",
      "@shared n'est plus utilisé; l'alias tsconfig.json du frontend peut être conservé ou supprimé plus tard."
    ]
  },
  "acceptance": [
    "npm i à la racine fonctionne (workspaces actifs)",
    "Le frontend et le backend résolvent '@ufm/shared' sans erreur",
    "Aucune dépendance 'file:..' restante"
  ]
}